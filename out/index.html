<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <style>
      body {
        background-color: lightgrey;
        margin: 0;
        padding: 0;
      }

      #bevy_game {
        background-color: grey;
      }

      .controls {
        display: flex;
        align-items: center;
        gap: 1em;
      }

      .controls > textarea {
        width: 100%;
        height: 5cm;
      }
    </style>
  </head>
  <body>
    <div style="margin: 1em 2em; display: flex; flex-direction: column; gap: .5em;">
      <div class="controls">
        <div>Board layout: </div>
        <select id="layout_select">
          <option value="standard">Standard</option>
          <option value="hole">The Hole</option>
          <option value="closeup">Close-up</option>
          <option value="marathon">Marathon</option>
          <option value="custom">Custom</option>
        </select>
        <button>Load layout</button>
        <button>Export layout</button>
      </div>
      <div class="controls">
        <textarea id="pieces_ta" title="Pieces"></textarea>
        <textarea id="promotions_ta" title="Promotions"></textarea>
      </div>
      <div class="controls">
        <div>Bottom side: </div>
        <select>
          <option>White</option>
          <option>Black</option>
        </select>
      </div>
      <button>Restart Game</button>
    </div>
    <div style="width: 100vw; height: 100vh">
      <canvas id="bevy_game">
      </canvas>
    </div>
  </body>
  <script type="module">
    import init from './chess2.js';
    init()
  </script>
  <script>
    function greet() {}

    let pieces = {
      "standard": `\
rnbqkbnr
pppppppp
________
________
________
________
PPPPPPPP
RNBQKBNR`,
      "hole": `\
rnbqkbnr
pppppppp
________
___XX___
___XX___
________
PPPPPPPP
RNBQKBNR`,
      "closeup": `\
rnbqkbnr
pppppppp
________
________
________
PPPPPPPP
RNBQKBNR`,
      "marathon": `\
rnbqkbnr
pppppppp
________
________
________
________
________
PPPPPPPP
RNBQKBNR`,
      "custom": ""
    }

    let promotions = {
      "standard": `\
WWWWWWWW
________
________
________
________
________
________
bbbbbbbb`,
      "hole": `\
WWWWWWWW
________
________
___XX___
___XX___
________
________
bbbbbbbb`,
      "closeup": `\
WWWWWWWW
________
________
________
________
________
bbbbbbbb`,
      "marathon": `\
WWWWWWWW
________
________
________
________
________
________
________
bbbbbbbb`,
      "custom": ""
    }

    let layout_select = document.getElementById("layout_select")
    let pieces_ta = document.getElementById("pieces_ta")
    let promotions_ta = document.getElementById("promotions_ta")

    layout_select.onchange = function() {
      let selected = layout_select.value
      pieces_ta.value = pieces[selected]
      promotions_ta.value = promotions[selected]
    }
    layout_select.onchange()

    pieces_ta.onchange = function() {
      pieces[layout_select.value] = pieces_ta.value
    }

    promotions_ta.onchange = function() {
      promotions[layout_select.value] = promotions_ta.value
    }
  </script>
</html>